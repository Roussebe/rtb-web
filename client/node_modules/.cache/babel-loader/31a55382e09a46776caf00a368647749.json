{"ast":null,"code":"import _slicedToArray from\"/home/roussebe/dev/WakeUpCoach/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";//import UploadImg from \"./UploadImg\";\nimport{updateBio}from\"../../actions/user.actions\";import{dateParser}from\"../Utils\";//import FollowHandler from \"./FollowHandler\";\nimport{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UpdateProfil=function UpdateProfil(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),bio=_useState2[0],setBio=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),updateForm=_useState4[0],setUpdateForm=_useState4[1];var userData=useSelector(function(state){return state.userReducer;});var usersData=useSelector(function(state){return state.usersReducer;});var error=useSelector(function(state){return state.errorReducer.userError;});var dispatch=useDispatch();var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),followingPopup=_useState6[0],setFollowingPopup=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),followersPopup=_useState8[0],setFollowersPopup=_useState8[1];var handleUpdate=function handleUpdate(){dispatch(updateBio(userData._id,bio));setUpdateForm(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"profil-container\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\" Profil de \",userData.pseudo]}),/*#__PURE__*/_jsxs(\"div\",{className:\"update-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left-part\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Photo de profil\"}),/*#__PURE__*/_jsx(\"img\",{src:userData.picture,alt:\"user-pic\"}),/*#__PURE__*/_jsx(\"p\",{children:error.maxSize}),/*#__PURE__*/_jsx(\"p\",{children:error.format})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"right-part\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bio-update\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Bio\"}),updateForm===false&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return setUpdateForm(!updateForm);},children:userData.bio}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setUpdateForm(!updateForm);},children:\"Modifier bio\"})]}),updateForm&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",defaultValue:userData.bio,onChange:function onChange(e){return setBio(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpdate,children:\"Valider modifications\"})]})]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Membre depuis le : \",dateParser(userData.createdAt)]}),/*#__PURE__*/_jsxs(\"h5\",{onClick:function onClick(){return setFollowingPopup(true);},children:[\"Abonnements : \",userData.following?userData.following.length:\"\"]}),/*#__PURE__*/_jsxs(\"h5\",{onClick:function onClick(){return setFollowersPopup(true);},children:[\"Abonn\\xE9s : \",userData.followers?userData.followers.length:\"\"]})]})]}),followingPopup&&/*#__PURE__*/_jsx(\"div\",{className:\"popup-profil-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Abonnements\"}),/*#__PURE__*/_jsx(\"span\",{className:\"cross\",onClick:function onClick(){return setFollowingPopup(false);},children:\"\\u2715\"}),/*#__PURE__*/_jsx(\"ul\",{children:usersData.map(function(user){for(var i=0;i<userData.following.length;i++){if(user._id===userData.following[i]){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"img\",{src:user.picture,alt:\"user-pic\"}),/*#__PURE__*/_jsx(\"h4\",{children:user.pseudo}),/*#__PURE__*/_jsx(\"div\",{className:\"follow-handler\"})]},user._id);}}return null;})})]})}),followersPopup&&/*#__PURE__*/_jsx(\"div\",{className:\"popup-profil-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Abonn\\xE9s\"}),/*#__PURE__*/_jsx(\"span\",{className:\"cross\",onClick:function onClick(){return setFollowersPopup(false);},children:\"\\u2715\"}),/*#__PURE__*/_jsx(\"ul\",{children:usersData.map(function(user){for(var i=0;i<userData.followers.length;i++){if(user._id===userData.followers[i]){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"img\",{src:user.picture,alt:\"user-pic\"}),/*#__PURE__*/_jsx(\"h4\",{children:user.pseudo}),/*#__PURE__*/_jsx(\"div\",{className:\"follow-handler\"})]},user._id);}}return null;})})]})})]});};export default UpdateProfil;","map":{"version":3,"sources":["/home/roussebe/dev/WakeUpCoach/client/src/components/Profil/UpdateProfil.js"],"names":["React","useState","useDispatch","useSelector","updateBio","dateParser","UpdateProfil","bio","setBio","updateForm","setUpdateForm","userData","state","userReducer","usersData","usersReducer","error","errorReducer","userError","dispatch","followingPopup","setFollowingPopup","followersPopup","setFollowersPopup","handleUpdate","_id","pseudo","picture","maxSize","format","e","target","value","createdAt","following","length","followers","map","user","i"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n//import UploadImg from \"./UploadImg\";\nimport { updateBio } from \"../../actions/user.actions\";\nimport { dateParser } from \"../Utils\";\n//import FollowHandler from \"./FollowHandler\";\n\nconst UpdateProfil = () => {\n  const [bio, setBio] = useState(\"\");\n  const [updateForm, setUpdateForm] = useState(false);\n  const userData = useSelector((state) => state.userReducer);\n  const usersData = useSelector((state) => state.usersReducer);\n  const error = useSelector((state) => state.errorReducer.userError);\n  const dispatch = useDispatch();\n  const [followingPopup, setFollowingPopup] = useState(false);\n  const [followersPopup, setFollowersPopup] = useState(false);\n\n  const handleUpdate = () => {\n    dispatch(updateBio(userData._id, bio));\n    setUpdateForm(false);\n  };\n\n  return (\n    <div className=\"profil-container\">\n      <h1> Profil de {userData.pseudo}</h1>\n      <div className=\"update-container\">\n        <div className=\"left-part\">\n          <h3>Photo de profil</h3>\n          <img src={userData.picture} alt=\"user-pic\" />\n          {/* <UploadImg /> */}\n          <p>{error.maxSize}</p>\n          <p>{error.format}</p>\n        </div>\n        <div className=\"right-part\">\n          <div className=\"bio-update\">\n            <h3>Bio</h3>\n            {updateForm === false && (\n              <>\n                <p onClick={() => setUpdateForm(!updateForm)}>{userData.bio}</p>\n                <button onClick={() => setUpdateForm(!updateForm)}>\n                  Modifier bio\n                </button>\n              </>\n            )}\n            {updateForm && (\n              <>\n                <textarea\n                  type=\"text\"\n                  defaultValue={userData.bio}\n                  onChange={(e) => setBio(e.target.value)}\n                ></textarea>\n                <button onClick={handleUpdate}>Valider modifications</button>\n              </>\n            )}\n          </div>\n          <h4>Membre depuis le : {dateParser(userData.createdAt)}</h4>\n          <h5 onClick={() => setFollowingPopup(true)}>\n            Abonnements : {userData.following ? userData.following.length : \"\"}\n          </h5>\n          <h5 onClick={() => setFollowersPopup(true)}>\n            Abonnés : {userData.followers ? userData.followers.length : \"\"}\n          </h5>\n        </div>\n      </div>\n      {followingPopup && (\n        <div className=\"popup-profil-container\">\n          <div className=\"modal\">\n            <h3>Abonnements</h3>\n            <span className=\"cross\" onClick={() => setFollowingPopup(false)}>\n              &#10005;\n            </span>\n            <ul>\n              {usersData.map((user) => {\n                for (let i = 0; i < userData.following.length; i++) {\n                  if (user._id === userData.following[i]) {\n                    return (\n                      <li key={user._id}>\n                        <img src={user.picture} alt=\"user-pic\" />\n                        <h4>{user.pseudo}</h4>\n                        <div className=\"follow-handler\">\n                          {/* <FollowHandler idToFollow={user._id} type={'suggestion'} /> */}\n                        </div>\n                      </li>\n                    );\n                  }\n                }\n                return null;\n              })}\n            </ul>\n          </div>\n        </div>\n      )}\n      {followersPopup && (\n        <div className=\"popup-profil-container\">\n          <div className=\"modal\">\n            <h3>Abonnés</h3>\n            <span className=\"cross\" onClick={() => setFollowersPopup(false)}>\n              &#10005;\n            </span>\n            <ul>\n              {usersData.map((user) => {\n                for (let i = 0; i < userData.followers.length; i++) {\n                  if (user._id === userData.followers[i]) {\n                    return (\n                      <li key={user._id}>\n                        <img src={user.picture} alt=\"user-pic\" />\n                        <h4>{user.pseudo}</h4>\n                        <div className=\"follow-handler\">\n                          {/* <FollowHandler idToFollow={user._id} type={'suggestion'} /> */}\n                        </div>\n                      </li>\n                    );\n                  }\n                }\n                return null;\n              })}\n            </ul>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default UpdateProfil;\n"]},"metadata":{},"sourceType":"module"}