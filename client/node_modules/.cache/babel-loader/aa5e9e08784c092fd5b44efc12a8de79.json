{"ast":null,"code":"import axios from \"axios\"; //\n\nexport const GET_RITUALS = \"GET_RITUALS\";\nexport const UPDATE_RITUAL_HABIT = \"UPDATE_RITUAL_HABIT\";\nexport const TICK_HABIT = \"TICK_HABIT\";\nexport const ADD_RITUAL = \"ADD_RITUAL\";\nexport const UPDATE_RITUAL = \"UPDATE_RITUAL\";\nexport const DELETE_RITUAL = \"DELETE_RITUAL\"; // errors\n\nexport const GET_RITUAL_ERRORS = \"GET_RITUAL_ERRORS\";\nexport const getRituals = num => {\n  return dispatch => {\n    return axios.get(`${process.env.REACT_APP_API_URL}api/ritual/`).then(res => {\n      console.log(\"/api/ritual result \", res.data);\n      dispatch({\n        type: GET_RITUALS,\n        payload: res.data.rituals\n      });\n    }).catch(err => console.log(err));\n  };\n};\nexport const updateRitualHabits = (ritual, habits) => {\n  return dispatch => {\n    const request = habits.filter(habit => habit.selected).map(habit => {\n      return {\n        _id: habit._id,\n        title: habit.title\n      };\n    });\n    return axios.post(`${process.env.REACT_APP_API_URL}api/ritual/upd_habit/${ritual}`, {\n      data: request\n    }).then(res => {\n      console.log(\"/api/ritual/upd_habit/\", res.data);\n      dispatch({\n        type: UPDATE_RITUAL_HABIT,\n        payload: res.data.ritual\n      });\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n};\nexport const tickHabit = (ritual, habit) => {\n  return dispatch => {\n    return axios({\n      method: \"post\",\n      url: `${process.env.REACT_APP_API_URL}api/ritual/tick_habit`,\n      data: {\n        params: {\n          ritual,\n          habit\n        }\n      }\n    }).then(res => {\n      console.log(\"/api/ritual/tick_habit\", res.data);\n      dispatch({\n        type: TICK_HABIT,\n        payload: {\n          ritual: res.data.ritual\n        }\n      });\n    }).catch(err => console.log(err));\n  };\n};\nexport const addRitual = data => {\n  return dispatch => {\n    return axios.post(`${process.env.REACT_APP_API_URL}api/ritual/`, data).then(res => {\n      if (res.data.errors) {\n        dispatch({\n          type: GET_RITUAL_ERRORS,\n          payload: res.data.errors\n        });\n      } else {\n        dispatch({\n          type: GET_RITUAL_ERRORS,\n          payload: \"\"\n        });\n      }\n    });\n  };\n};\nexport const updateRitual = (ritualId, message) => {\n  return dispatch => {\n    return axios({\n      method: \"put\",\n      url: `${process.env.REACT_APP_API_URL}api/ritual/${ritualId}`,\n      data: {\n        message\n      }\n    }).then(res => {\n      dispatch({\n        type: UPDATE_RITUAL,\n        payload: {\n          message,\n          ritualId\n        }\n      });\n    }).catch(err => console.log(err));\n  };\n};\nexport const deleteRitual = ritualId => {\n  return dispatch => {\n    return axios({\n      method: \"delete\",\n      url: `${process.env.REACT_APP_API_URL}api/ritual/${ritualId}`\n    }).then(res => {\n      dispatch({\n        type: DELETE_RITUAL,\n        payload: {\n          ritualId\n        }\n      });\n    }).catch(err => console.log(err));\n  };\n};","map":{"version":3,"sources":["/home/roussebe/dev/WakeUpCoach/client/src/actions/ritual.actions.js"],"names":["axios","GET_RITUALS","UPDATE_RITUAL_HABIT","TICK_HABIT","ADD_RITUAL","UPDATE_RITUAL","DELETE_RITUAL","GET_RITUAL_ERRORS","getRituals","num","dispatch","get","process","env","REACT_APP_API_URL","then","res","console","log","data","type","payload","rituals","catch","err","updateRitualHabits","ritual","habits","request","filter","habit","selected","map","_id","title","post","error","tickHabit","method","url","params","addRitual","errors","updateRitual","ritualId","message","deleteRitual"],"mappings":"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","sourcesContent":["import axios from \"axios\";\n\n//\nexport const GET_RITUALS = \"GET_RITUALS\";\nexport const UPDATE_RITUAL_HABIT = \"UPDATE_RITUAL_HABIT\";\nexport const TICK_HABIT = \"TICK_HABIT\";\n\nexport const ADD_RITUAL = \"ADD_RITUAL\";\nexport const UPDATE_RITUAL = \"UPDATE_RITUAL\";\nexport const DELETE_RITUAL = \"DELETE_RITUAL\";\n\n// errors\nexport const GET_RITUAL_ERRORS = \"GET_RITUAL_ERRORS\";\n\nexport const getRituals = (num) => {\n  return (dispatch) => {\n    return axios\n      .get(`${process.env.REACT_APP_API_URL}api/ritual/`)\n      .then((res) => {\n        console.log( \"/api/ritual result \" , res.data )\n        dispatch({ type: GET_RITUALS, payload: res.data.rituals });\n      })\n      .catch((err) => console.log(err));\n  };\n};\n\nexport const updateRitualHabits = (ritual, habits) => {\n  return (dispatch) => {\n    const request = habits\n      .filter( (habit) => habit.selected )\n      .map( (habit) => {\n        return { _id: habit._id, title: habit.title }\n      });\n\n    return axios.post(`${process.env.REACT_APP_API_URL}api/ritual/upd_habit/${ritual}`, { data : request} )\n      .then( (res) => {\n        console.log( \"/api/ritual/upd_habit/\", res.data )\n        dispatch( { type: UPDATE_RITUAL_HABIT, payload: res.data.ritual } )\n      } )\n      .catch( (error) => { console.error( error ) });\n  }\n}\n\nexport const tickHabit = (ritual, habit) => {\n  return (dispatch) => {\n    return axios({\n      method: \"post\",\n      url: `${process.env.REACT_APP_API_URL}api/ritual/tick_habit` ,\n      data: { params: {ritual, habit} },\n    })\n      .then((res) => {\n        console.log( \"/api/ritual/tick_habit\", res.data )\n        dispatch({ type: TICK_HABIT, payload: {ritual: res.data.ritual} });\n      })\n      .catch((err) => console.log(err));\n  };\n}\n\nexport const addRitual = (data) => {\n  return (dispatch) => {\n    return axios\n      .post(`${process.env.REACT_APP_API_URL}api/ritual/`, data)\n      .then((res) => {\n        if (res.data.errors) {\n          dispatch({ type: GET_RITUAL_ERRORS, payload: res.data.errors });\n        } else {\n          dispatch({ type: GET_RITUAL_ERRORS, payload: \"\" });\n        }\n      });\n  };\n};\n\nexport const updateRitual = (ritualId, message) => {\n  return (dispatch) => {\n    return axios({\n      method: \"put\",\n      url: `${process.env.REACT_APP_API_URL}api/ritual/${ritualId}`,\n      data: { message },\n    })\n      .then((res) => {\n        dispatch({ type: UPDATE_RITUAL, payload: { message, ritualId } });\n      })\n      .catch((err) => console.log(err));\n  };\n};\n\nexport const deleteRitual = (ritualId) => {\n  return (dispatch) => {\n    return axios({\n      method: \"delete\",\n      url: `${process.env.REACT_APP_API_URL}api/ritual/${ritualId}`,\n    })\n      .then((res) => {\n        dispatch({ type: DELETE_RITUAL, payload: { ritualId } });\n      })\n      .catch((err) => console.log(err));\n  };\n};\n"]},"metadata":{},"sourceType":"module"}