{"ast":null,"code":"import axios from\"axios\";//\nexport var GET_RITUALS=\"GET_RITUALS\";export var UPDATE_RITUAL_HABIT=\"UPDATE_RITUAL_HABIT\";export var TICK_HABIT=\"TICK_HABIT\";export var ADD_RITUAL=\"ADD_RITUAL\";export var UPDATE_RITUAL=\"UPDATE_RITUAL\";export var DELETE_RITUAL=\"DELETE_RITUAL\";// errors\nexport var GET_RITUAL_ERRORS=\"GET_RITUAL_ERRORS\";export var getRituals=function getRituals(num){return function(dispatch){return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"api/ritual/\")).then(function(res){console.log(\"/api/ritual result \",res.data);dispatch({type:GET_RITUALS,payload:res.data.rituals});}).catch(function(err){return console.log(err);});};};export var updateRitualHabits=function updateRitualHabits(ritual,habits){return function(dispatch){var request=habits.filter(function(habit){return habit.selected;}).map(function(habit){return{_id:habit._id,title:habit.title};});return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"api/ritual/upd_habit/\").concat(ritual),{data:request}).then(function(res){console.log(\"/api/ritual/upd_habit/\",res.data);dispatch({type:UPDATE_RITUAL_HABIT,payload:res.data.ritual});}).catch(function(error){console.error(error);});};};export var tickHabit=function tickHabit(ritual,habit){return function(dispatch){return axios({method:\"post\",url:\"\".concat(process.env.REACT_APP_API_URL,\"api/ritual/tick_habit\"),data:{params:{ritual:ritual,habit:habit}}}).then(function(res){console.log(\"/api/ritual/tick_habit\",res.data);dispatch({type:TICK_HABIT,payload:{ritual:res.data.ritual}});}).catch(function(err){return console.log(err);});};};export var addRitual=function addRitual(data){return function(dispatch){return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"api/ritual/\"),data).then(function(res){if(res.data.errors){dispatch({type:GET_RITUAL_ERRORS,payload:res.data.errors});}else{dispatch({type:GET_RITUAL_ERRORS,payload:\"\"});}});};};export var updateRitual=function updateRitual(ritualId,message){return function(dispatch){return axios({method:\"put\",url:\"\".concat(process.env.REACT_APP_API_URL,\"api/ritual/\").concat(ritualId),data:{message:message}}).then(function(res){dispatch({type:UPDATE_RITUAL,payload:{message:message,ritualId:ritualId}});}).catch(function(err){return console.log(err);});};};export var deleteRitual=function deleteRitual(ritualId){return function(dispatch){return axios({method:\"delete\",url:\"\".concat(process.env.REACT_APP_API_URL,\"api/ritual/\").concat(ritualId)}).then(function(res){dispatch({type:DELETE_RITUAL,payload:{ritualId:ritualId}});}).catch(function(err){return console.log(err);});};};","map":{"version":3,"sources":["/home/roussebe/dev/WakeUpCoach/client/src/actions/ritual.actions.js"],"names":["axios","GET_RITUALS","UPDATE_RITUAL_HABIT","TICK_HABIT","ADD_RITUAL","UPDATE_RITUAL","DELETE_RITUAL","GET_RITUAL_ERRORS","getRituals","num","dispatch","get","process","env","REACT_APP_API_URL","then","res","console","log","data","type","payload","rituals","catch","err","updateRitualHabits","ritual","habits","request","filter","habit","selected","map","_id","title","post","error","tickHabit","method","url","params","addRitual","errors","updateRitual","ritualId","message","deleteRitual"],"mappings":"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","sourcesContent":["import axios from \"axios\";\n\n//\nexport const GET_RITUALS = \"GET_RITUALS\";\nexport const UPDATE_RITUAL_HABIT = \"UPDATE_RITUAL_HABIT\";\nexport const TICK_HABIT = \"TICK_HABIT\";\n\nexport const ADD_RITUAL = \"ADD_RITUAL\";\nexport const UPDATE_RITUAL = \"UPDATE_RITUAL\";\nexport const DELETE_RITUAL = \"DELETE_RITUAL\";\n\n// errors\nexport const GET_RITUAL_ERRORS = \"GET_RITUAL_ERRORS\";\n\nexport const getRituals = (num) => {\n  return (dispatch) => {\n    return axios\n      .get(`${process.env.REACT_APP_API_URL}api/ritual/`)\n      .then((res) => {\n        console.log( \"/api/ritual result \" , res.data )\n        dispatch({ type: GET_RITUALS, payload: res.data.rituals });\n      })\n      .catch((err) => console.log(err));\n  };\n};\n\nexport const updateRitualHabits = (ritual, habits) => {\n  return (dispatch) => {\n    const request = habits\n      .filter( (habit) => habit.selected )\n      .map( (habit) => {\n        return { _id: habit._id, title: habit.title }\n      });\n\n    return axios.post(`${process.env.REACT_APP_API_URL}api/ritual/upd_habit/${ritual}`, { data : request} )\n      .then( (res) => {\n        console.log( \"/api/ritual/upd_habit/\", res.data )\n        dispatch( { type: UPDATE_RITUAL_HABIT, payload: res.data.ritual } )\n      } )\n      .catch( (error) => { console.error( error ) });\n  }\n}\n\nexport const tickHabit = (ritual, habit) => {\n  return (dispatch) => {\n    return axios({\n      method: \"post\",\n      url: `${process.env.REACT_APP_API_URL}api/ritual/tick_habit` ,\n      data: { params: {ritual, habit} },\n    })\n      .then((res) => {\n        console.log( \"/api/ritual/tick_habit\", res.data )\n        dispatch({ type: TICK_HABIT, payload: {ritual: res.data.ritual} });\n      })\n      .catch((err) => console.log(err));\n  };\n}\n\nexport const addRitual = (data) => {\n  return (dispatch) => {\n    return axios\n      .post(`${process.env.REACT_APP_API_URL}api/ritual/`, data)\n      .then((res) => {\n        if (res.data.errors) {\n          dispatch({ type: GET_RITUAL_ERRORS, payload: res.data.errors });\n        } else {\n          dispatch({ type: GET_RITUAL_ERRORS, payload: \"\" });\n        }\n      });\n  };\n};\n\nexport const updateRitual = (ritualId, message) => {\n  return (dispatch) => {\n    return axios({\n      method: \"put\",\n      url: `${process.env.REACT_APP_API_URL}api/ritual/${ritualId}`,\n      data: { message },\n    })\n      .then((res) => {\n        dispatch({ type: UPDATE_RITUAL, payload: { message, ritualId } });\n      })\n      .catch((err) => console.log(err));\n  };\n};\n\nexport const deleteRitual = (ritualId) => {\n  return (dispatch) => {\n    return axios({\n      method: \"delete\",\n      url: `${process.env.REACT_APP_API_URL}api/ritual/${ritualId}`,\n    })\n      .then((res) => {\n        dispatch({ type: DELETE_RITUAL, payload: { ritualId } });\n      })\n      .catch((err) => console.log(err));\n  };\n};\n"]},"metadata":{},"sourceType":"module"}